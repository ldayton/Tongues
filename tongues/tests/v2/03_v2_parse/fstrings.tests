=== simple fstring
f"{1}"
---
ok
---

=== triple quoted fstring
f"""{1}"""
---
ok
---

=== fstring with two exprs
f"{foo} {bar}"
---
ok
---

=== empty fstring
f""
---
ok
---

=== empty triple fstring
f""""""
---
ok
---

=== empty format spec
f"{1:}"
---
ok
---

=== conversion a
f"{1!a}"
---
ok
---

=== conversion with format
f"{1!a:1}"
---
ok
---

=== format width
f"{1:1}"
---
ok
---

=== nested format spec
f"{1:1.{32}}"
---
ok
---

=== format align
f"{1::>4}"
---
ok
---

=== format from variable
f"{x:{y}}"
---
ok
---

=== format from variable empty
f"{x:{y:}}"
---
ok
---

=== format from variable with spec
f"{x:{y:1}}"
---
ok
---

=== escaped braces
f"{{}}"
---
ok
---

=== escaped with expr
f"{{{1}}}"
---
ok
---

=== escaped open with expr
f"{{{1}"
---
ok
---

=== multiple escaped
f"1{{2{{3"
---
ok
---

=== escaped close
f"}}"
---
ok
---

=== debug format
f"{a=}"
---
ok
---

=== debug format call
f"{a()=}"
---
ok
---

=== multiline fstring
f"""abc
def"""
---
ok
---

=== multiline with expr
f"""abc{
123}def"""
---
ok
---

=== line continuation in string part
f"abc\
def"
---
ok
---

=== starred tuple in fstring
f"{*x,}"
---
ok
---

=== multiple starred
f"{*x, *y}"
---
ok
---

=== mixed starred
f"{x, *y}"
---
ok
---

=== starred first
f"{*x, y}"
---
ok
---

=== genexp in fstring
f"{x for x in [1]}"
---
ok
---

=== unmatched close brace
f"}"
---
error: parse
---

=== unmatched open brace
f"{"
---
error: parse
---

=== unmatched close triple
f"""}"""
---
error: parse
---

=== unmatched open triple
f"""{"""
---
error: parse
---

=== invalid conversion expr
f"{1!{a}}"
---
error: parse
---

=== invalid conversion debug
f"{1=!{a}}"
---
error: parse
---

=== conversion without expr
f"{!{a}}"
---
error: parse
---

=== empty expr
f"{}"
---
error: parse
---

=== backslash in expr
f"{\}"
---
error: parse
---

=== escaped quote in expr
f"{'\\'}"
---
error: parse
---

=== hash in expr
f"{#}"
---
error: parse
---

=== colon only
f"{:}"
---
error: parse
---

=== colon close
f"{:}}}"
---
error: parse
---

=== colon with spec no expr
f"{:1}"
---
error: parse
---

=== bang colon no expr
f"{!:}"
---
error: parse
---

=== bang only
f"{!}"
---
error: parse
---

=== bang a no expr
f"{!a}"
---
error: parse
---

=== empty nested format
f"{1:{}}"
---
error: parse
---

=== empty nested format colon
f"{1:{:}}"
---
error: parse
---

=== newline in single line fstring
f"abc
def"
---
error: parse
---

=== invalid conversion b
f'{1!b}'
---
error: parse
---

=== continue in fstring
f'{continue}'
---
error: parse
---

=== semicolon in fstring
f'{1;1}'
---
error: parse
---

=== trailing semicolon in fstring
f'{a;}'
---
error: parse
---

=== unterminated quote in fstring
f'{"}'
---
error: parse
---

=== string concat in fstring
f'{b"" ""}'
---
error: parse
---

=== debug with invalid conversion
f'{1=!b}'
---
error: parse
---
